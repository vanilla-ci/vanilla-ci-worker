apply plugin: 'java'
apply plugin: 'osgi'

sourceCompatibility = 1.8
targetCompatibility = 1.8

group = 'com.vanillaci'
version = '0.0.1'

repositories {
    mavenCentral()
}

dependencies {
	// niceties
	compile 'org.jetbrains:annotations:13.0'
	compile 'com.google.guava:guava:16.0'
	compile 'org.codehaus.jackson:jackson-mapper-asl:1.9.13'

	// OSGI interfaces
	compile 'org.osgi:org.osgi.core:4.3.1'

	// logging
	compile 'org.apache.logging.log4j:log4j-api:2.0-rc1'
	compile 'org.apache.logging.log4j:log4j-core:2.0-rc1'

	testCompile group: 'junit', name: 'junit', version: '4.11'
	testCompile 'org.mockito:mockito-all:1.8.4'
}

jar {
	manifest {
		name = project.name

		instruction 'Private-Package', 'com.vanillaci.internal'
		instruction 'Export-Package', 'com.vanillaci.plugins'
		instruction 'Import-Package', 'org.osgi.framework'

		instruction 'Bundle-Vendor', 'Vanilla CI'
		instruction 'Bundle-Description', 'Vanilla CI Worker Node'
		instruction 'Bundle-Activator', 'com.vanillaci.internal.Activator'
	}
}